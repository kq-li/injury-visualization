<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Step 2 - A Basic Donut Chart</title>
  </head>
  <body style="background:purple;">
    <div id="chart"></div>
    <script src="d3v4.js"></script>
    <script>
      (function(d3) {
        'use strict';

        var dataset = [
          { label: 'Abulia', count: 10 },
          { label: 'Betelgeuse', count: 20 },
          { label: 'Cantaloupe', count: 30 },
          { label: 'Dijkstra', count: 40 }
        ];
        
        var x = 500;
        var y = 300;
        var width = 200;
        var radius = width / 2;
        var donutWidth = 25;                            // NEW

        var color = d3.scaleOrdinal(d3.schemeCategory20b);

        var svg = d3.select('#chart')
          .append('svg')
          .attr('width', 800)
          .attr('height', 600)
          .attr("id", "svg")
          .append('g')
          .attr('transform', 'translate(' + x +
            ',' + y + ')');

        var ar = d3.arc()
          .innerRadius(radius - donutWidth)             // UPDATED
          .outerRadius(radius);

        var pie = d3.pie()
          .value(function(d) { return d.count; })
          .sort(null);

        var path = svg.selectAll('path')
          .data(pie(dataset))
          .enter()
          .append('path')
          .attr('d', ar)
          .attr('state', 1)
          .attr('fill', function(d, i) {
            return color(d.data.label);
          });
          
        var i= 0;
        for(; i < document.getElementsByTagName("path").length ; i++){

        document.getElementsByTagName("path")[i].addEventListener("mouseover", function(e){
            thickenPortion(this);
        });
        }
        
        function m(element){
            //console.log("dude");
            element.setAttribute("stroke-width", 0); 
            element.setAttribute("state", 1);
        }
            
        function thickenPortion(element){
            if(element.getAttribute("state") == 1){
        var a = document.createElementNS("http://www.w3.org/2000/svg", "path");
        a.setAttribute("d", element.getAttribute("d"));
        a.setAttribute("stroke-width", 10);
        a.setAttribute("state", 2);
        a.setAttribute("stroke",element.getAttribute("fill"));
        a.setAttribute("fill",element.getAttribute("fill"));
        a.addEventListener("mouseover", function(e){
            thickenPortion(this);
        });
        a.addEventListener("mouseout", function(e){
            m(this);
        });
        document.getElementsByTagName("g")[0].removeChild(element);
        document.getElementsByTagName("g")[0].appendChild(a);
        
            }
          }
      })(window.d3);
    </script>
  </body>
</html>